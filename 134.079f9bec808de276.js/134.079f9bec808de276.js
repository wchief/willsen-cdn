"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[134],{5134:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var a=o(5155),c=o(2115);let l=e=>{let{src:t,alt:o,className:l,loading:n="lazy",decoding:s="async"}=e,[i,r]=(0,c.useState)(""),[d,p]=(0,c.useState)(!1),[h,u]=(0,c.useState)(0);return((0,c.useEffect)(()=>{let e=t.split("/").pop()||"";if(t.startsWith("https://cdn.jsdelivr.net/")){console.log("Using CDN URL directly: ".concat(t)),r(t);return}let o=t.includes("/releases/")||t.includes("releases/"),a="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||"file:"===window.location.protocol;if(o&&!a){r("https://cdn.jsdelivr.net/gh/wchief/willsen-cdn@main/images/releases/".concat(e));return}let c=[t.startsWith("http")?t:"/".concat(t.replace(/^\/+/,"")),"/uploads/".concat(e),"/uploads/releases/".concat(e)];console.log("CacheBustingImage: Trying paths for ".concat(e,":"),c),r(c[0]+"?t=".concat(Date.now()))},[t]),(0,c.useEffect)(()=>{if(!d||h>=7)return;let e=setTimeout(()=>{let e=t.split("/").pop()||"";console.log("Image load error (attempt ".concat(h+1,"/7): ").concat(i));let o=t.includes("blog"),a=t.includes("releases")||t.includes("release"),c=["localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||"file:"===window.location.protocol?o?"/uploads/blog/".concat(e):a?"/uploads/releases/".concat(e):"/uploads/".concat(e):o?"https://cdn.jsdelivr.net/gh/wchief/willsen-cdn@main/images/blog/".concat(e):a?"https://cdn.jsdelivr.net/gh/wchief/willsen-cdn@main/images/releases/".concat(e):"https://cdn.jsdelivr.net/gh/wchief/willsen-cdn@main/images/".concat(e),"/uploads/".concat(e),"uploads/".concat(e),"/uploads/releases/".concat(e),"uploads/releases/".concat(e),"/".concat(e),"".concat(e)];if(h<c.length){let e=c[h].startsWith("https://cdn.jsdelivr.net/")?c[h]:"".concat(c[h],"?t=").concat(Date.now());console.log("Trying path ".concat(h+1,"/").concat(c.length,": ").concat(e)),r(e)}p(!1)},100);return()=>clearTimeout(e)},[d,h,t,i]),i)?(0,a.jsx)("img",{src:i,alt:o,className:l,loading:n,decoding:s,onError:()=>{h<7?(p(!0),u(e=>e+1),console.error("Image load error (attempt ".concat(h+1,"/7):"),i)):(console.error("Failed to load image after all attempts for: ".concat(t)),console.error("Tried all possible paths for filename: ".concat(t.split("/").pop()||"")))}}):null}}}]);